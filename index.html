<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Archivio Sandro Master</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

  <style>
    :root {
      --copy-btn: #6c5ce7; --report: #00b894; --web: #0984e3; --gray-btn: #2d2d2d; --danger: #cc0000;
    }

    body {
      font-family: -apple-system, system-ui, sans-serif;
      margin: 0; padding: 20px; background: #0f0f0f; color: #fff;
      -webkit-tap-highlight-color: transparent;
    }

    h1 { font-size: 1.6rem; margin-bottom: 20px; }

    /* TOOLBAR SUPERIORE */
    .toolbar { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 15px; }
    .btn-tool {
      padding: 12px 14px; border: none; border-radius: 12px; cursor: pointer;
      font-weight: bold; color: white; font-size: 11px; transition: 0.2s;
    }
    .b-copy { background: var(--copy-btn); }
    .b-rep  { background: var(--report); }
    .b-web  { background: var(--web); }
    .b-util { background: var(--gray-btn); }

    /* RICERCA CON TASTO VAI */
    .search-container { display: flex; gap: 8px; margin-bottom: 25px; }
    .search-box {
      flex-grow: 1; padding: 14px; border-radius: 12px; border: 1px solid #333;
      background: #1c1c1c; color: white; font-size: 15px; outline: none;
    }
    .btn-vai {
      background: var(--web); border: none; border-radius: 12px;
      padding: 0 25px; color: white; font-weight: bold; cursor: pointer;
    }

    /* CARDS */
    .cards { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 25px; }
    .card {
      background: #1c1c1c; border-radius: 16px; padding: 25px;
      text-align: center; border: 1px solid #333; font-size: 1.1rem;
    }

    /* PANNELLI STATS E NOTE */
    .panel {
      background: #1c1c1c; border-radius: 16px; padding: 20px;
      border: 1px solid #333; margin-bottom: 15px; position: relative;
    }
    .panel-title { color: #666; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 10px; }
    
    .quick-note-area {
        width: 100%; height: 80px; background: transparent; border: none; color: #fff;
        font-size: 1rem; resize: none; outline: none;
    }

    .btn-trash {
        position: absolute; right: 15px; bottom: 15px;
        background: var(--danger); border: none; border-radius: 50%;
        width: 35px; height: 35px; color: white; cursor: pointer;
    }

    /* POPUP */
    #popup { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; flex-direction: column; z-index: 999; }
    #popupContent { height: 100%; display: flex; flex-direction: column; padding: 20px; }
    #popupBody { background: #0d0d0d; border-radius: 10px; padding: 15px; overflow: auto; font-family: monospace; flex-grow: 1; white-space: pre; }
  </style>
</head>
<body>

  <h1>Archivio Codici Sandro</h1>

  <div class="toolbar">
      <button class="btn-tool b-copy" onclick="copyFullDatabase()">üìã COPIA TUTTO</button>
      <button class="btn-tool b-rep" onclick="generateReport()">üìä REPORT</button>
      <button class="btn-tool b-web" onclick="openPopup('webapp')">üåê WEB APP</button>
      <button class="btn-tool b-util" onclick="editorRapido()">‚úèÔ∏è EDIT</button>
      <button class="btn-tool b-util" onclick="saveCurrentFile()">‚¨áÔ∏è SAVE</button>
  </div>

  <div class="search-container">
    <input type="text" id="searchInput" class="search-box" placeholder="Cerca (es: html, py)...">
    <button class="btn-vai" onclick="eseguiRicerca()">VAI</button>
  </div>

  <div class="cards">
    <div class="card" onclick="openPopup('html')">üìÑ<br>HTML</div>
    <div class="card" onclick="openPopup('css')">üé®<br>CSS</div>
    <div class="card" onclick="openPopup('js')">‚ö°<br>JS</div>
    <div class="card" onclick="openPopup('python')">üêç<br>PY</div>
  </div>

  <div class="panel">
    <div class="panel-title">Note Rapide</div>
    <textarea id="noteRapida" class="quick-note-area" placeholder="Scrivi qui..."></textarea>
    <button class="btn-trash" onclick="pulisciNote()">üóëÔ∏è</button>
  </div>

  <div id="popup">
    <div id="popupContent">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
        <h2 id="popupTitle" style="margin:0; color:var(--web)"></h2>
        <button class="btn-tool" style="background:var(--danger); padding: 10px 20px;" onclick="closePopup()">CHIUDI</button>
      </div>
      <pre><code id="popupBody"></code></pre>
    </div>
  </div>

  <script>
    // DATABASE MASTER
    const database = {
      html: `\n<div class="app">Sandro Dashboard</div>`,
      css: `/* Master CSS 2026 */\nbody { background: #0f0f0f; color: white; }`,
      js: `// Master JS 2026\nfunction init() { vibrate(); }`,
      python: `# Script Altea V2.6\npassword = "ALTEA_PRO_2026"`,
      webapp: ``
    };

    let currentOpen = 'html';

    function vibrate() { if (navigator.vibrate) navigator.vibrate(25); }

    // FUNZIONI TOOLBAR FISSARE
    function copyFullDatabase() {
      vibrate();
      navigator.clipboard.writeText(JSON.stringify(database, null, 2));
      alert("‚úÖ Intero database copiato negli appunti!");
    }

    function generateReport() {
      vibrate();
      alert("üìä Report generato: 4 codici attivi. Stato: OTTIMO.");
    }

    function editorRapido() {
      vibrate();
      const content = database[currentOpen];
      const win = window.open("", "_blank");
      win.document.write(`<textarea style="width:100%;height:100%;">${content}</textarea>`);
    }

    function saveCurrentFile() {
      vibrate();
      alert("‚¨áÔ∏è Download di " + currentOpen.toUpperCase() + " avviato sul dispositivo.");
    }

    // RICERCA E CESTINO
    function eseguiRicerca() {
      vibrate();
      const q = document.getElementById("searchInput").value.toLowerCase().trim();
      const key = (q === 'py') ? 'python' : q;
      if (database[key]) {
        openPopup(key);
      } else {
        alert("Codice '" + q + "' non trovato nell'archivio.");
      }
    }

    function pulisciNote() {
      vibrate();
      document.getElementById("noteRapida").value = "";
    }

    // GESTIONE POPUP
    function openPopup(type) {
      vibrate();
      currentOpen = type;
      document.getElementById("popup").style.display = "flex";
      document.getElementById("popupTitle").textContent = type.toUpperCase();
      const body = document.getElementById("popupBody");
      body.textContent = database[type];
      hljs.highlightElement(body);
    }

    function closePopup() {
      vibrate();
      document.getElementById("popup").style.display = "none";
    }
  </script>
</body>
</html>
