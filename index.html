<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Archivio Codici Progetto</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

  <style>
    /* STILE ARCHIVIO */
    body { font-family: -apple-system, system-ui, sans-serif; margin: 0; padding: 20px; background: #0f0f0f; color: #fff; }
    h1 { font-weight: 800; letter-spacing: -0.5px; margin-bottom: 25px; }
    
    .cards { display: flex; gap: 15px; flex-wrap: wrap; }
    .card {
      background: #1c1c1c; border-radius: 16px; padding: 18px 24px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5); cursor: pointer; min-width: 200px;
      transition: all 0.2s ease; display: flex; align-items: center; gap: 12px; border: 1px solid #333;
    }
    .card:hover { transform: translateY(-3px); background: #252525; border-color: #007aff; }
    .icon { font-size: 28px; }

    /* POPUP E ANIMAZIONI (Dalle tue immagini) */
    #popup { 
      position: fixed; inset: 0; background: rgba(0,0,0,0.85); 
      display: none; align-items: center; justify-content: center; 
      z-index: 999; backdrop-filter: blur(8px); 
    }
    #popupContent { 
      background: #1e1e1e; width: 92%; max-width: 1000px; height: 85vh; 
      border-radius: 20px; padding: 20px; display: flex; flex-direction: column; 
      border: 1px solid #444; animation: panelSlideUp 0.28s cubic-bezier(0.22, 1, 0.36, 1);
    }
    
    @keyframes panelSlideUp {
      0% { transform: translateY(100%); }
      60% { transform: translateY(-6%); }
      100% { transform: translateY(0); }
    }

    #popupHeader { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
    #popupTitle { font-size: 14px; font-weight: bold; color: #007aff; text-transform: uppercase; }
    
    .btn-group button { 
      margin-left: 6px; border: none; background: #333; color: #fff; 
      padding: 8px 14px; border-radius: 10px; cursor: pointer; 
    }
    
    pre { margin: 0; flex-grow: 1; overflow: hidden; border-radius: 12px; }
    #popupBody { 
      background: #0d0d0d; height: 100%; overflow: auto; font-size: 14px; 
      padding: 15px !important; font-family: "SF Mono", "Fira Code", monospace; 
    }
  </style>
</head>
<body>

  <h1>Archivio Codici</h1>

  <div class="cards">
    <div class="card" onclick="openPopup('html')">
      <span class="icon">üìÑ</span>
      <span>App Note (HTML)</span>
    </div>

    <div class="card" onclick="openPopup('css')">
      <span class="icon">üé®</span>
      <span>App Note (CSS)</span>
    </div>

    <div class="card" onclick="openPopup('js')">
      <span class="icon">‚ö°</span>
      <span>App Note (JS)</span>
    </div>
  </div>

  <div id="popup">
    <div id="popupContent">
      <div id="popupHeader">
        <div id="popupTitle">CODICE</div>
        <div class="btn-group">
          <button id="copyBtn" title="Copia">üìã</button>
          <button id="downloadBtn" title="Scarica">‚¨áÔ∏è</button>
          <button id="textareaBtn" title="Editor">üìù</button>
          <button id="closePopup">‚úï</button>
        </div>
      </div>
      <pre><code id="popupBody"></code></pre>
    </div>
  </div>

  <script>
    /* DATABASE CODICI (Qui risiedono le tue +900 righe) */
    const codici = {
      html: `<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Note App</title>
</head>
<body>
  </body>
</html>`,

      css: `/* CODICE CSS COMPLETO APP NOTE */
:root { --bg: #ffffff; --text: #000000; }
body { background: var(--bg); color: var(--text); }
.panel { position: fixed; bottom: 0; width: 100%; height: 70%; }
/* Tutto il resto del tuo stile... */`,

      js: `/* CODICE JS COMPLETO APP NOTE */
document.addEventListener("DOMContentLoaded", () => {
  console.log("App Note Inizializzata");
  // Logica Google Drive, Cestino, ecc...
});`
    };

    /* LOGICA POPUP (Dalle tue immagini) */
    const popup = document.getElementById("popup");
    const popupTitle = document.getElementById("popupTitle");
    const popupBody = document.getElementById("popupBody");
    let currentType = "";

    function openPopup(type) {
      currentType = type;
      popup.style.display = "flex";
      popupTitle.textContent = "CODICE " + type.toUpperCase();

      // Imposta la classe per Highlight.js
      popupBody.className = type === 'html' ? 'language-xml' : type === 'css' ? 'language-css' : 'language-javascript';
      
      // Inserisce il codice
      popupBody.textContent = codici[type];
      
      // Colora il codice
      hljs.highlightElement(popupBody);
    }

    // Chiusura
    document.getElementById("closePopup").onclick = () => {
      popup.style.display = "none";
    };

    // Funzione Copia
    document.getElementById("copyBtn").onclick = async () => {
      await navigator.clipboard.writeText(codici[currentType]);
      const btn = document.getElementById("copyBtn");
      btn.textContent = "‚úîÔ∏è";
      setTimeout(() => { btn.textContent = "üìã"; }, 1500);
    };

    // Funzione Scarica
    document.getElementById("downloadBtn").onclick = () => {
      const ext = currentType === 'html' ? 'html' : currentType === 'css' ? 'css' : 'js';
      const blob = new Blob([codici[currentType]], { type: "text/plain" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = `app-note.${ext}`;
      a.click();
      URL.revokeObjectURL(url);
    };

    // Funzione Editor (Textarea)
    document.getElementById("textareaBtn").onclick = () => {
      const win = window.open("", "_blank");
      win.document.write(\`<body style="margin:0"><textarea style="width:100%;height:100vh;font-family:monospace;padding:20px;background:#1e1e1e;color:#fff;border:none;">\${codici[currentType]}</textarea></body>\`);
    };
  </script>

</body>
</html>
