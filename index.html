<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Archivio & Play Pro</title>
    <style>
        :root { --black: #111; --green: #1b4d3e; --white: #fff; --gray: #f4f4f4; }
        * { box-sizing: border-box; -webkit-appearance: none; }
        body { font-family: sans-serif; background: var(--gray); margin: 0; padding: 15px; }

        .clock { background: var(--black); color: #fff; text-align: center; padding: 15px; font-weight: bold; border-radius: 8px; margin-bottom: 20px; font-size: 22px; }

        /* PLAY EDITOR */
        .card { background: var(--white); border: 3px solid var(--black); padding: 20px; box-shadow: 8px 8px 0px var(--green); margin-bottom: 25px; }
        h2 { font-size: 16px; margin: 0 0 15px 0; text-transform: uppercase; color: var(--green); }
        label { font-size: 11px; font-weight: bold; display: block; margin-top: 10px; }
        input, textarea { width: 100%; border: 2px solid var(--black); padding: 10px; margin-bottom: 5px; font-family: monospace; font-size: 14px; background: #fafafa; }

        /* CARTELLA APP NOTE */
        .folder-box { border: 4px dashed var(--black); background: #eef2f1; padding: 15px; margin-top: 30px; border-radius: 15px; }
        .folder-title { font-weight: 900; font-size: 14px; text-align: center; margin-bottom: 10px; display: block; color: var(--green); }

        .btn-group { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }
        .btn { flex: 1; min-width: 80px; padding: 12px; border: none; color: #fff; font-weight: bold; border-radius: 4px; cursor: pointer; font-size: 11px; text-transform: uppercase; }
        .btn-save { background: var(--green); }
        .btn-reset { background: #666; }
        .btn-edit { background: #007bff; }
        .btn-delete { background: #d9534f; }

        .stats-bar { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; margin-bottom: 15px; }
        .stat-item { background: #222; color: #0f0; font-size: 10px; padding: 8px; text-align: center; border-radius: 4px; border: 1px solid var(--green); }

        .note-item { background: white; border: 2px solid #000; padding: 15px; margin-top: 10px; box-shadow: 4px 4px 0px #ccc; }
        .code-tag { display: inline-block; background: #eee; padding: 2px 6px; font-size: 9px; border: 1px solid #ccc; border-radius: 3px; margin-right: 5px; }
        
        .spacer { height: 400px; } /* Per chiudere Play senza intoppi */
    </style>
</head>
<body>

    <div class="clock" id="clk">00:00:00</div>

    <div class="card">
        <h2>üöÄ PLAY LIVE EDITOR</h2>
        <input type="text" id="title" placeholder="Nome Progetto..." autocomplete="off">
        <label>HTML</label>
        <textarea id="html_c" placeholder="Incolla HTML..." rows="2" autocomplete="off"></textarea>
        <label>CSS</label>
        <textarea id="css_c" placeholder="Incolla CSS..." rows="2" autocomplete="off"></textarea>
        <label>JS</label>
        <textarea id="js_c" placeholder="Incolla JS..." rows="2" autocomplete="off"></textarea>
        
        <div class="btn-group">
            <button class="btn btn-save" onclick="saveData()">MEMORIZZA</button>
            <button class="btn btn-reset" onclick="resetForm()">RESET</button>
        </div>
    </div>

    <div class="folder-box">
        <span class="folder-title">üìÇ CARTELLA APP NOTE (CODICI SALVATI)</span>
        
        <div class="stats-bar">
            <div class="stat-item">NOTE: <span id="count">0</span></div>
            <div class="stat-item">MEMORIA: <span id="mem">0KB</span></div>
        </div>

        <div id="output"></div>
    </div>

    <div class="spacer"></div>

    <script>
        function updateClock() {
            document.getElementById('clk').innerText = new Date().toLocaleTimeString('it-CH');
        }
        setInterval(updateClock, 1000); updateClock();

        // I TUOI CODICI SALVATI (Inseriti automaticamente se l'archivio √® vuoto)
        const initialData = [
            {
                t: "APP NOTE ORIGINALE",
                h: "<div class='app'>...</div>",
                c: "body { background: gray; }",
                j: "function init() { console.log('App Note'); }",
                id: 1001
            }
        ];

        let database = JSON.parse(localStorage.getItem('sandro_storage'));
        if (!database || database.length === 0) {
            database = initialData;
            localStorage.setItem('sandro_storage', JSON.stringify(database));
        }

        function saveData() {
            const title = document.getElementById('title').value;
            if(!title) return alert("Inserisci un titolo!");

            const newEntry = {
                t: title,
                h: document.getElementById('html_c').value,
                c: document.getElementById('css_c').value,
                j: document.getElementById('js_c').value,
                id: Date.now()
            };

            database.push(newEntry);
            localStorage.setItem('sandro_storage', JSON.stringify(database));
            render();
            resetForm();
        }

        function resetForm() {
            ['title','html_c','css_c','js_c'].forEach(id => document.getElementById(id).value = '');
        }

        function deleteNote(id) {
            if(confirm("Eliminare definitivamente?")) {
                database = database.filter(n => n.id !== id);
                localStorage.setItem('sandro_storage', JSON.stringify(database));
                render();
            }
        }

        function editNote(id) {
            const item = database.find(n => n.id === id);
            document.getElementById('title').value = item.t;
            document.getElementById('html_c').value = item.h;
            document.getElementById('css_c').value = item.c;
            document.getElementById('js_c').value = item.j;
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function render() {
            const out = document.getElementById('output');
            out.innerHTML = database.map(n => `
                <div class="note-item">
                    <b>üìÅ ${n.t}</b><br>
                    <span class="code-tag">HTML</span><span class="code-tag">CSS</span><span class="code-tag">JS</span>
                    <div class="btn-group">
                        <button class="btn btn-edit" onclick="editNote(${n.id})">MODIFICA / RIPRISTINA</button>
                        <button class="btn btn-delete" onclick="deleteNote(${n.id})">ELIMINA</button>
                    </div>
                </div>
            `).join('').reverse();

            document.getElementById('count').innerText = database.length;
            const size = (JSON.stringify(database).length / 1024).toFixed(2);
            document.getElementById('mem').innerText = size + "KB";
        }

        render();
    </script>
</body>
</html>
