<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Archivio Codici Pro</title>
    <style>
        :root { --black: #111; --green: #1b4d3e; --white: #fff; --gray: #f4f4f4; }
        * { box-sizing: border-box; -webkit-appearance: none; }
        body { font-family: sans-serif; background: var(--gray); margin: 0; padding: 15px; padding-bottom: 300px; }
        
        .clock { background: var(--black); color: #fff; text-align: center; padding: 15px; font-weight: bold; border-radius: 8px; margin-bottom: 20px; font-size: 22px; }
        .card { background: var(--white); border: 3px solid var(--black); padding: 20px; box-shadow: 8px 8px 0px var(--green); margin-bottom: 20px; }
        
        h2 { font-size: 16px; margin: 0 0 15px 0; text-transform: uppercase; }
        label { font-size: 11px; font-weight: bold; display: block; margin-bottom: 5px; }
        
        input, textarea { width: 100%; border: 2px solid var(--black); padding: 10px; margin-bottom: 15px; font-family: monospace; font-size: 14px; background: #fafafa; }
        
        .btn-group { display: flex; gap: 10px; }
        .btn { flex: 1; padding: 12px; border: none; color: #fff; font-weight: bold; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .btn-save { background: var(--green); }
        .btn-reset { background: #666; }

        .note-item { background: white; border: 2px solid #000; padding: 15px; margin-top: 15px; position: relative; }
        .code-preview { background: #222; color: #0f0; padding: 10px; font-size: 10px; overflow-x: auto; margin-top: 5px; border-radius: 4px; }
        
        .spacer { height: 350px; } /* Fondamentale per chiudere l'app senza intoppi */
    </style>
</head>
<body>

    <div class="clock" id="clk">00:00:00</div>

    <div class="card">
        <h2>Nuovo Progetto</h2>
        <input type="text" id="title" placeholder="Nome (es. Shop Online)" autocomplete="off" inputmode="text">
        
        <label>CODICE HTML</label>
        <textarea id="html_c" placeholder="Incolla HTML..." rows="3" autocomplete="off" inputmode="text"></textarea>
        
        <label>CODICE CSS</label>
        <textarea id="css_c" placeholder="Incolla CSS..." rows="3" autocomplete="off" inputmode="text"></textarea>
        
        <label>CODICE JS</label>
        <textarea id="js_c" placeholder="Incolla JS..." rows="3" autocomplete="off" inputmode="text"></textarea>

        <div class="btn-group">
            <button class="btn btn-save" onclick="save()">MEMORIZZA</button>
            <button class="btn btn-reset" onclick="reset()">RESET</button>
        </div>
    </div>

    <div id="output"></div>
    <div class="spacer"></div>

    <script>
        function update() { document.getElementById('clk').innerText = new Date().toLocaleTimeString('it-CH'); }
        setInterval(update, 1000); update();

        let db = JSON.parse(localStorage.getItem('archivio_sandro')) || [];

        function save() {
            const data = {
                t: document.getElementById('title').value,
                h: document.getElementById('html_c').value,
                c: document.getElementById('css_c').value,
                j: document.getElementById('js_c').value,
                id: Date.now()
            };
            if(!data.t) return alert("Inserisci un titolo");
            db.push(data);
            localStorage.setItem('archivio_sandro', JSON.stringify(db));
            render();
            reset();
        }

        function reset() {
            ['title','html_c','css_c','js_c'].forEach(id => document.getElementById(id).value = '');
        }

        function del(id) {
            db = db.filter(n => n.id !== id);
            localStorage.setItem('archivio_sandro', JSON.stringify(db));
            render();
        }

        function render() {
            const out = document.getElementById('output');
            out.innerHTML = db.map(n => `
                <div class="note-item">
                    <b>${n.t}</b>
                    <div class="code-preview">HTML: ${n.h.substring(0,20)}...</div>
                    <div class="code-preview">CSS: ${n.c.substring(0,20)}...</div>
                    <button onclick="del(${n.id})" style="margin-top:10px; background:red; color:white; border:none; padding:5px; border-radius:4px; font-size:10px;">ELIMINA</button>
                </div>
            `).join('').reverse();
        }
        render();
    </script>
</body>
</html>
